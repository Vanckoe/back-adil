{"ast":null,"code":"export default {\n  data() {\n    return {\n      products: [],\n      categories: [],\n      newProduct: {\n        name: '',\n        quantity: 0,\n        price: 0,\n        category_id: null\n      },\n      isAdmin: false,\n      selectedProduct: null\n    };\n  },\n  created() {\n    this.checkUserRoleAndLoadData();\n  },\n  methods: {\n    async checkUserRoleAndLoadData() {\n      const token = localStorage.getItem('authToken');\n      if (!token) return;\n      try {\n        const rolesResponse = await this.$http.get('/roles', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        this.isAdmin = rolesResponse.data.some(role => role.name === 'Admin');\n        this.loadProducts();\n        this.loadCategories();\n      } catch (error) {\n        console.error('Error checking user role:', error);\n      }\n    },\n    async loadProducts() {\n      try {\n        const response = await this.$http.get('/product/products');\n        this.products = response.data;\n      } catch (error) {\n        console.error('Error loading products:', error);\n      }\n    },\n    async loadCategories() {\n      try {\n        const response = await this.$http.get('/category/categories');\n        this.categories = response.data;\n      } catch (error) {\n        console.error('Error loading categories:', error);\n      }\n    },\n    async addProduct() {\n      const token = localStorage.getItem('authToken');\n      try {\n        await this.$http.post('/product/products', this.newProduct, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        this.loadProducts();\n        this.newProduct = {\n          name: '',\n          quantity: 0,\n          price: 0,\n          category_id: null\n        };\n      } catch (error) {\n        console.error('Error adding product:', error);\n      }\n    },\n    startEditProduct(product) {\n      this.selectedProduct = {\n        ...product\n      };\n    },\n    async confirmEditProduct() {\n      const token = localStorage.getItem('authToken');\n      try {\n        await this.$http.put(`/product/products/${this.selectedProduct.id}`, this.selectedProduct, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        this.loadProducts();\n        this.selectedProduct = null;\n      } catch (error) {\n        console.error('Error editing product:', error);\n      }\n    },\n    cancelEditProduct() {\n      this.selectedProduct = null;\n    },\n    async deleteProduct(id) {\n      const token = localStorage.getItem('authToken');\n      try {\n        await this.$http.delete(`/product/products/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        this.loadProducts();\n      } catch (error) {\n        console.error('Error deleting product:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","products","categories","newProduct","name","quantity","price","category_id","isAdmin","selectedProduct","created","checkUserRoleAndLoadData","methods","token","localStorage","getItem","rolesResponse","$http","get","headers","some","role","loadProducts","loadCategories","error","console","response","addProduct","post","startEditProduct","product","confirmEditProduct","put","id","cancelEditProduct","deleteProduct","delete"],"sources":["C:\\Users\\Vanckoe\\OneDrive\\Documents\\work\\Noncomercial\\lara\\crud\\src\\views\\AdminProduct.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <h1>Products</h1>\r\n      <div v-if=\"isAdmin\">\r\n        <input type=\"text\" v-model=\"newProduct.name\" placeholder=\"Product Name\">\r\n        <input type=\"number\" v-model=\"newProduct.quantity\" placeholder=\"Quantity\">\r\n        <input type=\"number\" v-model=\"newProduct.price\" placeholder=\"Price\">\r\n        <select v-model=\"newProduct.category_id\">\r\n          <option v-for=\"category in categories\" :value=\"category.id\" :key=\"category.id\">{{ category.name }}</option>\r\n  \r\n        </select>\r\n        <button @click=\"addProduct\">Add Product</button>\r\n      </div>\r\n      <ul>\r\n        <li v-for=\"product in products\" :key=\"product.id\">\r\n    {{ product.name }} - {{ product.quantity }} - {{ product.price }}\r\n          <div v-if=\"isAdmin\">\r\n            <button @click=\"startEditProduct(product)\">Edit</button>\r\n            <button @click=\"deleteProduct(product.id)\">Delete</button>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n      <div v-if=\"selectedProduct\">\r\n        <input class=\"input\" type=\"text\" v-model=\"selectedProduct.name\">\r\n        <input class=\"input\" type=\"number\" v-model=\"selectedProduct.quantity\">\r\n        <input class=\"input\" type=\"number\" v-model=\"selectedProduct.price\">\r\n        <select v-model=\"selectedProduct.category_id\">\r\n    <option v-for=\"category in categories\" :value=\"category.id\" :key=\"category.id\">{{ category.name }}</option>\r\n  </select>\r\n  \r\n        <button @click=\"confirmEditProduct\">Save Changes</button>\r\n        <button @click=\"cancelEditProduct\">Cancel</button>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  <script>\r\n  export default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      categories: [],\r\n      newProduct: {\r\n        name: '',\r\n        quantity: 0,\r\n        price: 0,\r\n        category_id: null\r\n      },\r\n      isAdmin: false,\r\n      selectedProduct: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.checkUserRoleAndLoadData();\r\n  },\r\n  methods: {\r\n    async checkUserRoleAndLoadData() {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n  \r\n      try {\r\n        const rolesResponse = await this.$http.get('/roles', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n  \r\n        this.isAdmin = rolesResponse.data.some(role => role.name === 'Admin');\r\n        this.loadProducts();\r\n        this.loadCategories();\r\n      } catch (error) {\r\n        console.error('Error checking user role:', error);\r\n      }\r\n    },\r\n    async loadProducts() {\r\n      try {\r\n        const response = await this.$http.get('/product/products');\r\n        this.products = response.data;\r\n      } catch (error) {\r\n        console.error('Error loading products:', error);\r\n      }\r\n    },\r\n    async loadCategories() {\r\n      try {\r\n        const response = await this.$http.get('/category/categories');\r\n        this.categories = response.data;\r\n      } catch (error) {\r\n        console.error('Error loading categories:', error);\r\n      }\r\n    },\r\n    async addProduct() {\r\n      const token = localStorage.getItem('authToken');\r\n      try {\r\n        await this.$http.post('/product/products', this.newProduct, {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        this.loadProducts();\r\n        this.newProduct = { name: '', quantity: 0, price: 0, category_id: null };\r\n      } catch (error) {\r\n        console.error('Error adding product:', error);\r\n      }\r\n    },\r\n    startEditProduct(product) {\r\n      this.selectedProduct = { ...product };\r\n    },\r\n    async confirmEditProduct() {\r\n      const token = localStorage.getItem('authToken');\r\n      try {\r\n        await this.$http.put(`/product/products/${this.selectedProduct.id}`, this.selectedProduct, {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        this.loadProducts();\r\n        this.selectedProduct = null;\r\n      } catch (error) {\r\n        console.error('Error editing product:', error);\r\n      }\r\n    },\r\n    cancelEditProduct() {\r\n      this.selectedProduct = null;\r\n    },\r\n    async deleteProduct(id) {\r\n      const token = localStorage.getItem('authToken');\r\n      try {\r\n        await this.$http.delete(`/product/products/${id}`, {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        this.loadProducts();\r\n      } catch (error) {\r\n        console.error('Error deleting product:', error);\r\n      }\r\n    },\r\n  },\r\n  };\r\n  </script>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}